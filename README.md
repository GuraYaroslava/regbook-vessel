# regbook-vessel

Требуется написать парсер [Российского морского регистра судоходства (РС, Регистр)](https://rs-class.org/ru/register/about/)
для создания локальной базы данных ["РЕГИСТРОВАЯ КНИГА"](https://lk.rs-class.org/regbook/regbookVessel).

---

#### Документация

- [Проектирование](#проектирование)
  - [Фильтры](#фильтры)
    - [Города](#порт-приписки--города--city)
    - [Страны](#флаг--страны--country)
    - [Статистические группы судов](#тип-судна--статистические-группы-судов--type)
    - [Ледовая категория](#ледовый-класс--ледовая-категория--class)
  - [Карточка](#карточка)
  - [Предпросмотр](#предпросмотр)
  - [Выписка](#выписка)
- [Разработка](#разработка)

---

# Проектирование

## Фильтры

### 0. Порт приписки / Города / Cities

filter_cities

| Поле       | Название       |
|------------|----------------|
| id         |                |
| name       | Название       |
| name_eng   | Название (eng) |
| country_ru | Страна         |

[Ссылка на форму выбора города.](https://lk.rs-class.org/regbook/getDictionary2?d=gorodRegbook&f=formfield)

### 1. Флаг / Страны / Countries

filter_countries

| Поле       | Название       |
|------------|----------------|
| id         |                |
| name       | Название       |
| name_eng   | Название (eng) |

[Ссылка на форму выбора страны.](https://lk.rs-class.org/regbook/getDictionary2?d=countryId&f=formfield)

### 2. Тип судна / Статистические группы судов / Types

filter_types

| Поле       | Название       |
|------------|----------------|
| id         |                |
| name       | Название       |

[Ссылка на форму выбора типа судна.](https://lk.rs-class.org/regbook/getDictionary2?d=statgr&f=formfield)

### 3. Ледовый класс / Ледовая категория / Classes

filter_classes

| Поле       | Название       |
|------------|----------------|
| id         |                |
| name       | Название       |

[Ссылка на форму выбора класса.](https://lk.rs-class.org/regbook/getDictionary2?d=icecat&f=formfield)

## Карточка

### Предпросмотр

[Пример](https://lk.rs-class.org/regbook/vessel?fleet_id=994121)

<details>
<summary>Пример предпросмотра</summary>

| Характеристика                                        | Значение                               |
|-------------------------------------------------------|----------------------------------------|
| Название судна                                        | АКАДЕМИК БОРИС ПЕТРОВ                  |
| Регистровый номер                                     | 832628                                 |
| Номер ИМО                                             | 8211150                                |
| Бывшее название                                       |                                        |
| Позывной                                              | UDVX                                   |
| Порт приписки                                         | Калининград                            |
| Флаг                                                  | Россия                                 |
| Символ класса                                         | KM(*) L1 [1] AUT2 special purpose ship |
| Переоборудование/модернизация существенного характера |                                        |

</details>

### Выписка

[Пример](https://lk.rs-class.org/regbook/vessel?fleet_id=1017605&a=print)

<details>
<summary>Пример выписки</summary>

| Характеристика                                                                                  | Значение                                                                                                                                                   |
|-------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Общие сведения**                                                                              |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Название судна                                                                                  | HAMMURABI                                                                                                                                                  |
| Регистровый номер                                                                               | 051322                                                                                                                                                     |
| Номер ИМО                                                                                       | 9297357                                                                                                                                                    |
| Бывшее название                                                                                 |                                                                                                                                                            |
| Позывной                                                                                        | 3E5088                                                                                                                                                     |
| Порт приписки                                                                                   | Панама                                                                                                                                                     |
| Флаг                                                                                            | Панама                                                                                                                                                     |
| Символ класса                                                                                   | KM* Arc4 (hull at d >=8.31) [1] AUT1-ICS OMBO LI SI VCS IGS-IG COW CCO BWM(T) ERS oil tanker(ESP), TMS                                                     |
| Переоборудование/модернизация существенного характера                                           |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| **Тип судна**                                                                                   |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Основной тип                                                                                    | Нефтеналивное                                                                                                                                              |
| **Сведения о постройке**                                                                        |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Дата постройки                                                                                  | 09/02/2006                                                                                                                                                 |
| Страна постройки                                                                                | Корея                                                                                                                                                      |
| Строительный номер                                                                              | 1531                                                                                                                                                       |
| Дата значительной части                                                                         |                                                                                                                                                            |
| Значительная часть                                                                              |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| **Размеры и скорость**                                                                          |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Валовая вместимость                                                                             | 63462 MK-1969                                                                                                                                              |
| Чистая вместимость                                                                              | 34210 MK-1969                                                                                                                                              |
| Дедвейт                                                                                         | 104999.000 т.                                                                                                                                              |
| Водоизмещение                                                                                   | 134501 т.                                                                                                                                                  |
| Длина наибольшая (теоретическая)                                                                | 251.51 м.                                                                                                                                                  |
| Длина габаритная                                                                                | 251.51 м.                                                                                                                                                  |
| Длина расчетная                                                                                 | 241.08 м.                                                                                                                                                  |
| Ширина габаритная                                                                               | 43.80 м.                                                                                                                                                   |
| Высота борта                                                                                    | 21.30 м.                                                                                                                                                   |
| Осадка                                                                                          | 15.00 м.                                                                                                                                                   |
| Скорость                                                                                        | 15.0                                                                                                                                                       |
|                                                                                                 |                                                                                                                                                            |
| **Механизмы**                                                                                   |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Тип силовой установки                                                                           | Дизельная                                                                                                                                                  |
| Главные двигатели                                                                               | Год постройки ГД: 2006<br/>Страна постройки: Корея<br/>Фирма постройки ГД: MAN B&W DIESEL A/S<br/>Количество и мощность ГД: 1*15820<br/>Марка ГД: 7S60MC-C |
| Количество и мощность ГЭД                                                                       |                                                                                                                                                            |
| Количество и тип движителя                                                                      | 1 - Винт фиксированного шага цельнолитой                                                                                                                   |
| Количество лопастей                                                                             | 4                                                                                                                                                          |
| Количество и мощность генераторов                                                               | 3* 910                                                                                                                                                     |
| Главные котлы                                                                                   |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| **Холодильная установка и радио-навигационное оборудование**                                    |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Холодильная установка                                                                           |                                                                                                                                                            |
| Рабочая температура                                                                             |                                                                                                                                                            |
| Хладагенты                                                                                      |                                                                                                                                                            |
| Радио-навигационное оборудование                                                                | Аппаратура автоматической идентификационной системы                                                                                                        |
| Аппаратура ОВЧ двусторонней радиотелефонной связи (ГМССБ)                                       |                                                                                                                                                            |
| Гирокомпас                                                                                      |                                                                                                                                                            |
| Лаг (устройство для измерения скорости и пройденного расстояния относительно воды)              |                                                                                                                                                            |
| Магнитный компас                                                                                |                                                                                                                                                            |
| Приемник службы НАВТЕКС                                                                         |                                                                                                                                                            |
| Приемник электронной системы определения местоположения (ЭСОМ)                                  |                                                                                                                                                            |
| Радиолокационная станция (не СОЛАС)                                                             |                                                                                                                                                            |
| Радиолокационная станция со средством автоматической радиолокационной прокладки (РЛС САРП)      |                                                                                                                                                            |
| Радиолокационная станция со средством автосопровождения (РЛС САС)                               |                                                                                                                                                            |
| Радиотелефонная станция ультравысоких частот (300-3000 Мгц)                                     |                                                                                                                                                            |
| Радиоустановка ОВЧ (ГМССБ)                                                                      |                                                                                                                                                            |
| Радиоустановка СЧ/ВЧ (ГМССБ)                                                                    |                                                                                                                                                            |
| Регистратор данных рейса                                                                        |                                                                                                                                                            |
| Система управления курсом судна (авторулевой)                                                   |                                                                                                                                                            |
| Спутниковый аварийный радиобуй системы КОСПАС-САРСАТ                                            |                                                                                                                                                            |
| Судовая земная станция признанной подвижной спутниковой службы (ГМССБ)                          |                                                                                                                                                            |
| Судовая система охранного оповещения                                                            |                                                                                                                                                            |
| Устройство указания местоположения для целей поиска и спасания: радиолокационный ответчик (РЛО) |                                                                                                                                                            |
| Электронная картографическая навигационно-информационная система (ЭКНИС)                        |                                                                                                                                                            |
| Эхолот                                                                                          |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| **Трюма, палубы, пассажиры**                                                                    |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Количество и кубатура грузовых трюмов                                                           |                                                                                                                                                            |
| Охлаждаемые грузовые помещения                                                                  |                                                                                                                                                            |
| Наливные танки                                                                                  | 14* 127534                                                                                                                                                 |
| Количество и тип контейнеров                                                                    |                                                                                                                                                            |
| Количество палуб                                                                                | 1                                                                                                                                                          |
| Количество переборок                                                                            | 8                                                                                                                                                          |
| Число пассажиров коечные                                                                        |                                                                                                                                                            |
| Число пассажиров бескоечных                                                                     |                                                                                                                                                            |
| Спецперсонал                                                                                    |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| **Люки, стрелы, краны**                                                                         |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Грузовые люки (число и размер в свету)                                                          |                                                                                                                                                            |
| Стрелы                                                                                          |                                                                                                                                                            |
| Краны                                                                                           |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| **Запасы и снабжение**                                                                          |                                                                                                                                                            |
|                                                                                                 |                                                                                                                                                            |
| Запасы топлива                                                                                  | 3966                                                                                                                                                       |
| Типы топлива                                                                                    | Дизельное, Мазут                                                                                                                                           |
| Водяной балласт                                                                                 | 45374 m3                                                                                                                                                   |
| Подогреватели                                                                                   |                                                                                                                                                            |
| Характеристика снабжения                                                                        |                                                                                                                                                            |
| Категория якорных цепей                                                                         | Обыкновенная                                                                                                                                               |
| Калибр якорных цепей                                                                            | 90.0                                                                                                                                                       |

</details>

### Статус / Свидетельства

[Пример](https://lk.rs-class.org/regbook/status?fleet_id=1017605)

| E-cert | Тип               | Название свидетельства                                           | Код   | Дата выдачи | Срок действия | Срок продлен до | Состояние |
|--------|-------------------|------------------------------------------------------------------|-------|-------------|---------------|-----------------|-----------|
|        | Классификационное | Классификационное свидетельство // Classification certificate    | CLC   | 28.07.2023  | 08.05.2024    |                 | DUE       |
|        | Конвенционное     | Свидетельство судна полярного плавания // Polar ship certificate | POLAR | 28.07.2023  | 05.11.2023    |                 | WDR       |

# Разработка

Пример запроса получения списка карточек по фильтру:

```
curl -X POST \
https://lk.rs-class.org/regbook/regbookVessel \
-H 'cache-control: no-cache' \
-H 'content-type: multipart/form-data' \
-F gorodRegbook= \
-F countryId=6CF1E5F4-2B6D-4DC6-836B-287154684870 \
-F icecat= \
-F statgr=47488F18-691C-AD5D-0A1C-9EA637E43848 \
-F namer='петров'
```

Установки:

```
sudo apt install python3
sudo apt install python3-pip
pip3 install mysql-connector-python
```

Запуск, где первый аргумент, если 1, то пересоздает схему БД, второй - стартует парсиг фильтров:

```
python3 parse_filters.py 1 0
python3 parse_cards.py
```

```
mysql -u root -p
```
